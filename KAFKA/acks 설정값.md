## 📚 스프링 카프카
##  ◆ 카프카 acks 설정값
## 📌 acks 설정값
### 정의:
카프카에서 acks 설정은 프로듀서가 메시지를 브로커로 보낸 후, 해당 메시지가 얼마나
안전하게 저장되었는지에 대한 확인 수준을 결정하는 중요한 설정이다.

### 1. acks = 0
#### 동작 방식:
프로듀서는 메시지를 브로커에게 보낸 후, 어떠한 응답도 기다리지 않고,
메시지가 네트워크 소켓 버퍼에 추가되면 즉시 전송이 완료된 것으로 간주한다.
#### 장점:
- 브로커의 응답을 기다리지 않으므로 가장 빠른 전송 속도를 가진다.
#### 단점:
- 메시지가 브로커에 도달했는지, 리더 파티션에 기록되었는지, 복제되었는지 전혀 확인할 수 없고
  브로커에 문제가 발생하거나 네트워크 오류가 발생하면 메시지가 유실될 수 있다.
#### 사용 사례:
데이터 유실이 허용되는 경우 (예: 로그 수집, 실시간 메트릭 데이터), 높은 처리량이 최우선인 경우.

### 2. acks = 1
#### 동작 방식:
프로듀서는 메시지를 리더 파티션에 보낸 후, 리더 브로커가 메시지를 성공적으로 받아서 자신의 로컬 로그에
기록했음을 확인하는 응답을 받을 때까지 기다린다. 팔로워 레플리카들이 메시지를 복제했는지는 확인하지 않는다.
#### 장점:
- 적절한 균형: 처리량과 내구성 사이에서 좋은 균형을 제공한다.
- 메시지 손실 위험 감소: 최소한 리더 브로커에는 메시지가 저장되었음을 보장한다.
#### 단점:
- 데이터 손실 가능성: 리더 브로커가 메시지를 받은 후 팔로워 레플리카에 복제되기 전에 장애가 발생하면 메시지가
  손실될 수 있다.
#### 사용 사례:
대부분의 일반적인 애플리케이션에서 사용되는 기본값이며, 적절한 처리량과 안정성이 요구될 때.

### 3. acks = all 또는 acks = -1
#### 동작 방식:
프로듀서는 메시지를 리더 브로커에 보낸 후, 리더 브로커뿐만 아니라 모든 ISR(In-Sync Replicas)에 속한 팔로워
레플리카들이 해당 메시지를 성공적으로 복제했음을 확인하는 응답을 받을 때까지 기다린다. 리더는 모든 ISR이 메시지를
복제했음을 확인한 후에만 프로듀서에게 응답한다.
#### 장점:
- 가장 강력한 데이터 내구성: ISR 내의 하나를 제외한 모든 레플리카에 장애가 발생하더라도 메시지가 유실되지 않음을 보장한다.
- 데이터 유실 최소화: 가장 높은 수준의 신뢰성을 제공한다.
#### 단점:
- 가장 낮은 처리량: 모든 ISR의 복제를 기다려야 하므로 지연 시간이 가장 길고 처리량이 낮아질 수 있다.
#### 사용 사례:
금융 거래, 주문 처리 등 데이터 유실이 절대적으로 허용되지 않는 중요한 데이터에 적합하다.





